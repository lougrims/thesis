\Section{Implementation in the energy extraction algorithm}

\par As seen in the previous chapter the optimization process for the energy extraction trajectory only requires a way to calculate the relationship between the lift and drag coefficient.
Since in our case these 2 variables depend only on the angle of attack and its change rate over time, it is fairly easy to implement it into the algorithm.
However the non dimensional time constant are different, the energy extraction one consider the optimal glide speed and the gravity acceleration whereas the one used for the GK model uses the flight speed and the chord length.

\Subsection{Relation between the different time scales}
As said before the time scale used in the two models are different.
To solve this issue the ratio of the two time constants are plotted (see figure \ref{fig:T_t+_ratio}) for a wide variety of flying objects.

\begin{equation}
  \frac{T}{t+}=\frac{V_{opt}}{g} \cdot \frac{U}{c}
  \label{eqn:T_t+}
\end{equation}

Or if the aircraft flies near its optimal glide speed

\begin{equation}
  \frac{T}{t+}=\frac{V_{opt}^2}{g \cdot c}
  \label{eqn:T_t+_ratio}
\end{equation}

This ratio happens to be the Froude number.


\begin{figure}[ht]
  \begin{center}
    %\includegraphics{<+file+>}
  \end{center}
  \caption{T to t+ ratio for divers flying objects}
  \label{fig:T_t+_ratio}
\end{figure}

\par It is interesting to notice that this ratio is in the same order of magnitude for all these objects.
The value of 90 is chosen as a default for this ratio as it represent a good average of the data compiled.


\par Another issue is that the GK model is dependent on the initial value of the state variable $x$.
The initial value of $x$ is taken as the quasi-steady value.
To minimize the effect of the transition from quasi-steady to unsteady flow at the beginning of the maneuver, the cycle is simulated twice and then only the second cycle is considered.
This is possible to do since the conditions applied on the trajectory constrain the initial and final angle of attack and pitch rate to be the same.


\Subsection{Effects of considering unsteady aerodynamics on the optimal trajectory}
Unsteady aerodynamics allows access to new areas on the $C_l$ vs $\alpha$ map as well as on the lift to drag ratio map.
This effects on the lift and drag characteristics that will influence the optimization process if the pitching rate is fast enough to trigger them.
The effects on the lift can divided into two categories.

\par The first one is the time lag for the flow separation. 
If the airfoil is pitched up fast enough the flow doesn't have the time to separate and high values of Cl can be attained.
%Since during a typical gust negative and positive values are needed for the lift we can assume that the flow will reattach when the angle of attack is close to zero.
If the flow separates then behaviors like the one we saw in the periodic pitching around 12 degrees (see figure \ref{fig:Pitching_allcases_Cl_12}) will be seen.

\par The second effect is seen when high pitch rates are present.
In these cases the $\alpha - \tau_2 \dot{\alpha}$ term in the state variable equation \ref{eqn:state_variable} starts to get influenced by the $\dot{\alpha}$ term. 
For example for a 4 degrees amplitude sinusoidal pitching around a mean angle of attack of zero at a frequency of $k=0.5$ will produce unsteady effects as seen on the following figures \ref{fig:alpha_dalpha_vs_t} and \ref{fig:x_fast_pitching}.

\begin{figure}[h]
  \centering
  \includegraphics{./Figures/alpha_dalpha_sin_amp=4_k=0p5.eps}
  \caption{Effects of $\tau_2 \dot{\alpha}$ for high pitching rate}
  \label{fig:alpha_dalpha_vs_t}
\end{figure}


\begin{figure}[h]
  \centering
  \includegraphics{./Figures/x_sin_amp=4_k=0p5.eps}
  \caption{State variable during fast sinusoidal pitching}
  \label{fig:x_fast_pitching}
\end{figure}

\par The state variable value starts at the quasi-steady value (as designed in the algorithm implementation) but after a couple of cycles it orbits close to an average value that would correspond to separated flows in a quasi-steady case.
This also leads to lower lift overall (see figure \ref{fig:Cl_fast_pitching}) since the value of x is smaller.

\begin{figure}[h]
  \centering
  \includegraphics{./Figures/Cl_vs_alpha_amp=4_k=0p5.eps}
  \caption{$C_l$ is decreased compared to quasi-steady values for high pitching rate maneuvers (the transient part has been removed for clarity)}
  \label{fig:Cl_fast_pitching}
\end{figure}



\par If the exact same constraints are used for optimization the problem illustrated by figure \ref{fig:unlimited_alpha_dot}.	

\begin{figure}[h]
  \begin{center}
  
<++>%\includegraphics{<+file+>}
\end{center}
  \caption{Optimization for vertical wind gusts with the same constraints as the previous cases}
  \label{fig:unlimited_alpha_dot}
\end{figure}

The issue is that the in order to reach the favorable high lift regions the algorithm produces a 
%Since the lift to drag ratio of the NACA0009 is about 10 (compared to 13 for the notional UAV) direct comparisons with the results presented in part \ref{sec:results_QS} are impossible.
\Subsection{The ``staircase'' optimization issue}

All these effects dependent on the pitch rate add a lot of complexity to the optimization problem.
One of the biggest is that to keep a reasonably low execution time for the optimization the number of points has to be kept relatively low (less than a hundred).
Such discretization of the interval can cause issues in the discreet integration parts of the algorithm.
It seems that for most optimization cases this effect is avoided.

\par However the results of the of optimization for short gusts ($0.2<T_g<0.5$) sometime shows a ``staircase'' pattern in the angle of attack.

\begin{figure}[h]
  \centering
  %\includegraphics{<+file+>}
  \caption{Staircase pattern seen for XXXX wind gust with $T_g=XX$}
  \label{fig:staircase_case}
\end{figure}

\par In those cases the algorithm seems to try to ``game'' the GK model with this jerky pitch motion.
Our theory is that this jerky motion avoids the decrease of the lift coefficient caused by high pitch rates by doing those for only short amount of time.
These spikes in the pitch rate are too short to be able to influence the low pass equation regulating the value of $x$.





\Section{A closer look at the high performing short gusts}

\Section{Bad performances at $T_G<0.1$}


\Section{Limitations of the unsteady GK model}

\Subsection{Considering the gusting and plunging component}

One of the major thing this optimization misses are the unsteady effects due to gusting and plunging.
In our case we have major gusts present at the same time as the pitching motion.
While the speed of the UAV changes too, the relative wind amplitude is in the order of 20\%.
We know that gusts as gentle as 5\% of the free stream speed can have huge influence on the lift characteristics and that the lift response to such gusts depends heavily on the frequency of the gusts.
The same can be said for the plunging motion.

\par While this variations are pretty wild it is suspected that they are caused by the same kind of mechanism as the lift variations caused by pitch angle changes.
With that in mind there is a fairly high probability that the resulting mechanism could be described by a model inspired by the GK model.
It is very likely that the state variable for such a model would be tied in some way to the state variable presented in this thesis.
If $x$ could be expressed as a function of $\alpha$, $\dot{\alpha}$ and $\dot{u}$ (for example), this model could be applicable to a whole new range of situations.


